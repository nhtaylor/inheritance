labels=c("Never Married",
"Married",
"Separated",
"Divorced",
"Widowed"))
data$R8496500 <- factor(data$R8496500,
levels=c(1.0,2.0,3.0,4.0),
labels=c("Northeast",
"North Central",
"South",
"West"))
data$R8496700 <- factor(data$R8496700,
levels=c(0.0,1.0,2.0,3.0,6.0),
labels=c("Never Married",
"Married",
"Separated",
"Divorced",
"Widowed"))
data$T2210300 <- factor(data$T2210300,
levels=c(1.0,2.0,3.0,4.0),
labels=c("Northeast",
"North Central",
"South",
"West"))
data$T2210500 <- factor(data$T2210500,
levels=c(0.0,1.0,2.0,3.0,6.0),
labels=c("Never Married",
"Married",
"Separated",
"Divorced",
"Widowed"))
data$T4112700 <- factor(data$T4112700,
levels=c(1.0,2.0,3.0,4.0),
labels=c("Northeast",
"North Central",
"South",
"West"))
data$T4112900 <- factor(data$T4112900,
levels=c(0.0,1.0,2.0,3.0,6.0),
labels=c("Never Married",
"Married",
"Separated",
"Divorced",
"Widowed"))
data$R2870800 <- factor(data$R2870800,
levels=c(1.0,2.0,3.0,4.0),
labels=c("Northeast",
"North Central",
"South",
"West"))
data$R2871000 <- factor(data$R2871000,
levels=c(0.0,1.0,2.0,3.0,5.0,6.0),
labels=c("Never Married",
"Married",
"Separated",
"Divorced",
"Remarried",
"Widowed"))
return(data)
}
varlabels <- c("ID# (1-12686) 79",
"AGE OF R 79",
"HGC BY RS MOTHER 79",
"HGC BY RS FATHER 79",
"# OF SIBS 79",
"SAMPLE ID  79 INT",
"RACL/ETHNIC COHORT /SCRNR 79",
"SEX OF R 79",
"MONTH BIRTH RS FATHER 87",
"YR OF BIRTH RS FATHER 87",
"AGE OF RS FATHER 87",
"MONTH BIRTH RS MOTHER 87",
"YR OF BIRTH RS MOTHER 87",
"AGE OF RS MOTHER 87",
"MONTH BIRTH RS FATHER 88",
"YR OF BIRTH RS FATHER 88",
"AGE OF RS FATHER 88",
"MONTH BIRTH RS MOTHER 88",
"YR OF BIRTH RS MOTHER 88",
"AGE OF RS MOTHER 88",
"HIGHEST DGR RCVD 88",
"R/SP RCV PROP/$ EST/TRUST/INHER 87 88",
"TOT MKT VAL EST/TRUST/INHER RCV 88",
"FAMILY NET WORTH (TRUNC) *KEY*",
"HRS/WK WRKD #1 88",
"CLASS OF WRKR #1 88",
"TOT NET FAMILY INC P-C YR 88",
"REGION OF CURRENT RESIDENCE 88",
"MARITAL STATUS 88",
"RS CURRENT RESIDENCE URBAN/RURAL 88",
"# CHILDREN EVER BORN 88",
"HIGHEST DGR RCVD 89",
"R/SP RCV PROP/$ EST/TRUST/INHER 88 89",
"TOT MKT VAL EST/TRUST/INHER RCV 89",
"FAMILY NET WORTH (TRUNC) *KEY*",
"HRS/WK WRKD #1 89",
"CLASS OF WRKR #1 89",
"TOT NET FAMILY INC P-C YR 89",
"REGION OF CURRENT RESIDENCE 89",
"MARITAL STATUS 89",
"RS CURRENT RESIDENCE URBAN/RURAL 89",
"# CHILDREN EVER BORN 89",
"HIGHEST DGR RCVD 90",
"R/SP RCV PROP/$ EST/TRUST/INHER 89 90",
"TOT MKT VAL EST/TRUST/INHER RCV 90",
"FAMILY NET WORTH (TRUNC) *KEY*",
"HRS/WK WRKD #1 90",
"CLASS OF WRKR #1 90",
"TOT NET FAMILY INC P-C YR 90",
"REGION OF CURRENT RESIDENCE 90",
"MARITAL STATUS 90",
"RS CURRENT RESIDENCE URBAN/RURAL 90",
"# CHILDREN EVER BORN 90",
"HIGHEST DGR RCVD 92",
"R/SP RCV PROP/$ EST/TRUST/INHER 91 92",
"TOT MKT VAL EST/TRUST/INHER RCV 92",
"FAMILY NET WORTH (TRUNC) *KEY*",
"HRS/WK WRKD #1 92",
"CLASS OF WRKR #1 92",
"TOT NET FAMILY INC P-C YR 92",
"REGION OF CURRENT RESIDENCE 92",
"MARITAL STATUS 92",
"RS CURRENT RESIDENCE URBAN/RURAL 92",
"# CHILDREN EVER BORN 92",
"NAME OF HIGHEST DEGREE EVER  RECD 93",
"HOURS PER WEEK WORKED 93",
"R'S EMPLOYMENT CATEGORY 93",
"R-SP RECD ESTAT,TRUST,INHER IN 1992? 93",
"TTL MKT VAL ESTAT,TRUST,INHER (R-SP) 93",
"FAMILY NET WORTH (TRUNC) *KEY*",
"TOTAL NET FAMILY INCOME 93",
"REGION OF RESIDENCE 93",
"MARITAL STATUS 93",
"RS RESIDENCE URBAN OR RURAL 93",
"# CHILDREN EVER BORN 93",
"NAME OF HIGHEST DEGREE EVER  RECD 94",
"HOURS PER WEEK WORKED 94",
"RS EMPLOYMENT CATEGORY ALL JOB #1 94",
"R-SP RECD ESTAT,TRUST,INHER IN 1993? 94",
"TTL MKT VAL ESTAT,TRUST,INHER (R-SP) 94",
"FAMILY NET WORTH (TRUNC) *KEY*",
"TOTAL NET FAMILY INCOME 94",
"REGION OF RESIDENCE 94",
"MARITAL STATUS 94",
"RS RESIDENCE URBAN OR RURAL 94",
"NUMBER OF CHILDREN EVER BORN 94",
"TOTAL NET FAMILY INCOME 96",
"REGION OF RESIDENCE 96",
"MARITAL STATUS 96",
"RS RESIDENCE URBAN OR RURAL 96",
"NUMBER OF CHILDREN EVER BORN 96",
"NAME OF HIGHEST DEGREE EVER RECD 96",
"HOURS PER WEEK WORKED JOB #1 96",
"RS EMPLOYMENT CATEGORY ALL JOB #1 96",
"R-SP RECD ESTAT,TRUST,INHER IN 1995? 96",
"TTL MKT VAL ESTAT,TRUST,INHER (R-SP) 96",
"FAMILY NET WORTH (TRUNC) *KEY*",
"NAME OF HIGHEST DEGREE EVER  RECD 1998",
"HOURS PER WEEK WORKED L1 1998",
"RECD ESTAT,TRUST,INHER IN 1997? 1998",
"TTL MKT VAL EST,TRUST,INHER 1997 1998",
"FAMILY NET WORTH (TRUNC) *KEY* 1998",
"RS EMPLOYMENT CATEGORY ALL JOB L1 1998",
"TOTAL NET FAMILY INCOME 1998",
"REGION OF RESIDENCE 1998",
"MARITAL STATUS 1998",
"RS RESIDENCE URBAN OR RURAL 1998",
"NUMBER OF CHILDREN EVER BORN 1998",
"NAME OF HIGHEST DEGREE EVER  RECD 2000",
"HOURS PER WEEK WORKED L1 2000",
"RS EMPLOYMENT CATEGORY ALL JOB L1 2000",
"FAMILY NET WORTH (TRUNC) *KEY* 2000",
"RECD ESTAT,TRUST,INHER IN 1999? 2000",
"TTL MKT VAL EST,TRUST,INHER 1999 2000",
"TOTAL NET FAMILY INCOME 2000",
"REGION OF RESIDENCE 2000",
"MARITAL STATUS 2000",
"RS RESIDENCE URBAN OR RURAL 2000",
"NUMBER OF CHILDREN EVER BORN 2000",
"NAME OF HIGHEST DEGREE EVER  RECD 2004",
"HOURS PER WEEK WORKED L1 2004",
"RS EMPLOYMENT CATEGORY ALL JOB L1 2004",
"RECD ESTAT,TRUST,INHER IN 2003? 2004",
"TTL MKT VAL EST,TRUST,INHER 2003 2004",
"FAMILY NET WORTH (TRUNC) *KEY* 2004",
"TOTAL NET FAMILY INCOME 2004",
"REGION OF RESIDENCE 2004",
"MARITAL STATUS 2004",
"RS RESIDENCE URBAN OR RURAL 2004",
"NUMBER OF CHILDREN EVER BORN 2004",
"NAME OF HIGHEST DEGREE EVER RECEIVED? 2008",
"HOURS PER WEEK WORKED L1 2008",
"RS EMPLOYMENT CATEGORY ALL JOB L1 2008",
"RECD ESTAT,TRUST,INHER SINCE DLI? 2008",
"TTL MKT VAL EST,TRUST,INHER 2007 2008",
"FAMILY NET WORTH (TRUNC) *KEY* 2008",
"TOTAL NET FAMILY INCOME 2008",
"REGION OF RESIDENCE 2008",
"MARITAL STATUS 2008",
"RS RESIDENCE URBAN OR RURAL 2008",
"NUMBER OF CHILDREN EVER BORN 2008",
"NAME OF HIGHEST DEGREE EVER  RECD 2012",
"HOURS PER WEEK WORKED L1 2012",
"RS EMPLOYMENT CATEGORY ALL JOB L1 2012",
"RECD ESTAT,TRUST,INHER IN 2001? 2012",
"TTL MKT VAL EST,TRUST,INHER 2011 2012",
"FAMILY NET WORTH (TRUNC) *KEY* 2012",
"TOTAL NET FAMILY INCOME 2012",
"REGION OF RESIDENCE 2012",
"MARITAL STATUS 2012",
"RS RESIDENCE URBAN OR RURAL 2012",
"NUMBER OF CHILDREN EVER BORN 2012"
)
# Use qnames rather than rnums
qnames = function(data) {
names(data) <- c("CASEID_1979",
"FAM-1B_1979",
"HGC-MOTHER_1979",
"HGC-FATHER_1979",
"FAM-28A_1979",
"SAMPLE_ID_1979",
"SAMPLE_RACE_78SCRN",
"SAMPLE_SEX_1979",
"FAM-DAD_M_1987",
"FAM-DAD_Y_1987",
"FAM-DAD_AGE_1987",
"FAM-MOM_M_1987",
"FAM-MOM_Y_1987",
"FAM-MOM_AGE_1987",
"FAM-DAD_M_1988",
"FAM-DAD_Y_1988",
"FAM-DAD_AGE_1988",
"FAM-MOM_M_1988",
"FAM-MOM_Y_1988",
"FAM-MOM_AGE_1988",
"Q3-10B_1988",
"Q13-71_1988",
"Q13-73_1988",
"NET_WORTH_88_1988",
"QES-52A.01_1988",
"COWALL-EMP1_1988",
"TNFI_TRUNC_1988",
"REGION_1988",
"MARSTAT-KEY_1988",
"URBAN-RURAL_1988",
"NUMKID88_1988",
"Q3-10B_1989",
"Q13-71_1989",
"Q13-73_1989",
"NET_WORTH_89_1989",
"QES-52A.01_1989",
"COWALL-EMP1_1989",
"TNFI_TRUNC_1989",
"REGION_1989",
"MARSTAT-KEY_1989",
"URBAN-RURAL_1989",
"NUMKID90_1989",
"Q3-10B_1990",
"Q13-71_1990",
"Q13-73_1990",
"NET_WORTH_90_1990",
"QES-52A.01_1990",
"COWALL-EMP1_1990",
"TNFI_TRUNC_1990",
"REGION_1990",
"MARSTAT-KEY_1990",
"URBAN-RURAL_1990",
"NUMKID90_1990",
"Q3-10B_1992",
"Q13-71_1992",
"Q13-73_1992",
"NET_WORTH_92_1992",
"QES-52A.01_1992",
"COWALL-EMP1_1992",
"TNFI_TRUNC_1992",
"REGION_1992",
"MARSTAT-KEY_1992",
"URBAN-RURAL_1992",
"NUMKID92_1992",
"Q3-10B_1993",
"QES-52A.01_1993",
"COWALL-EMP.01_1993",
"Q13-71_1993",
"Q13-73_1993",
"NET_WORTH_93_1993",
"TNFI_TRUNC_1993",
"REGION_1993",
"MARSTAT-KEY_1993",
"URBAN-RURAL_1993",
"NUMKID93_1993",
"Q3-10B_1994",
"QES-52A.01_1994",
"COWALL-EMP1_1994",
"Q13-71_1994",
"Q13-73_1994",
"NET_WORTH_94_1994",
"TNFI_TRUNC_1994",
"REGION_1994",
"MARSTAT-KEY_1994",
"URBAN-RURAL_1994",
"NUMKID94_1994",
"TNFI_TRUNC_1996",
"REGION_1996",
"MARSTAT-KEY_1996",
"URBAN-RURAL_1996",
"NUMKID96_1996",
"Q3-10B_1996",
"QES-52A.01_1996",
"COWALL-EMP1_1996",
"Q13-71_1996",
"Q13-73_1996",
"NET_WORTH_96_1996",
"Q3-10B_1998",
"QES-52A.01_1998",
"Q13-71_1998",
"Q13-73_1998",
"NET_WORTH_98_1998",
"COWALL-EMP.01_1998",
"TNFI_TRUNC_1998",
"REGION_1998",
"MARSTAT-KEY_1998",
"URBAN-RURAL_1998",
"NUMKID98_1998",
"Q3-10B_2000",
"QES-52A.01_2000",
"COWALL-EMP.01_2000",
"NET_WORTH_00_2000",
"Q13-71_2000",
"Q13-73_2000",
"TNFI_TRUNC_2000",
"REGION_2000",
"MARSTAT-KEY_2000",
"URBAN-RURAL_2000",
"NUMKID00_2000",
"Q3-10B_2004",
"QES-52A.01_2004",
"COWALL-EMP.01_2004",
"Q13-71_2004",
"Q13-73A_TRUNC_2004",
"NET_WORTH_04_2004",
"TNFI_TRUNC_2004",
"REGION_2004",
"MARSTAT-KEY_2004",
"URBAN-RURAL_2004",
"NUMKID04_2004",
"Q3-10D_2008",
"QES-52A.01_2008",
"COWALL-EMP.01_2008",
"Q13-71_2008",
"Q13-73A_TRUNC_2008",
"NET_WORTH_08_2008",
"TNFI_TRUNC_2008",
"REGION_2008",
"MARSTAT-KEY_2008",
"URBAN-RURAL_2008",
"NUMKID08_2008",
"Q3-10D_2012",
"QES-52A.01_2012",
"COWALL-EMP.01_2012",
"Q13-71_2012",
"Q13-73A_TRUNC_2012",
"NET_WORTH_12_2012",
"TNFI_TRUNC_2012",
"REGION_2012",
"MARSTAT-KEY_2012",
"URBAN-RURAL_2012",
"NUMKID12_2012")
return(data)
}
#********************************************************************************************************
# Remove the '#' before the following line to create a data file called "categories" with value labels.
categories <- vallabels(new_data)
# Remove the '#' before the following lines to rename variables using Qnames instead of Reference Numbers
# new_data <- qnames(new_data)
categories <- qnames(categories)
# Produce summaries for the raw (uncategorized) data file
# summary(new_data)
# Remove the '#' before the following lines to produce summaries for the "categories" data file.
#categories <- vallabels(new_data)
#summary(categories)
#************************************************************************************************************
# 1. PROVIDING ACCURATE COLUMN NAMES
colnames(categories)  <- c(
## 1979 & others
"id", "age_79", "ma_ed", "pa_ed",
"sibnum_79", "sample_id", "race", "sex",
## 1987
"pa_month87", "pa_year87", "pa_age87", "ma_month87", "ma_year87", "ma_age87",
## 1988
"pa_month88", "pa_year88", "pa_age88", "ma_month88", "ma_year88",
"ma_age88", "degree_1988", "gift_1988", "value_1988", "networth_1988",
"hours_1988", "employ_1988", "totinc_1988", "region_1988", "marstat_1988",
"reside_1988", "kidnum_1988",
## 1989
"degree_1989", "gift_1989", "value_1989", "networth_1989", "hours_1989",
"employ_1989", "totinc_1989", "region_1989", "marstat_1989", "reside_1989",
"kidnum_1989",
## 1990
"degree_1990", "gift_1990", "value_1990", "networth_1990", "hours_1990",
"employ_1990", "totinc_1990", "region_1990", "marstat_1990", "reside_1990",
"kidnum_1990",
## 1992
"degree_1992", "gift_1992", "value_1992", "networth_1992", "hours_1992",
"employ_1992", "totinc_1992", "region_1992", "marstat_1992", "reside_1992",
"kidnum_1992",
## 1993
"degree_1993", "hours_1993", "employ_1993", "gift_1993", "value_1993",
"networth_1993",  "totinc_1993", "region_1993", "marstat_1993", "reside_1993",
"kidnum_1993",
## 1994
"degree_1994", "hours_1994", "employ_1994", "gift_1994", "value_1994",
"networth_1994", "totinc_1994", "region_1994", "marstat_1994", "reside_1984",
"kidnum_1994",
## 1996
"totinc_1996", "region_1996", "marstat_1996", "reside_1996", "kidnum_1996",
"degree_1996", "hours_1996", "employ_1996", "gift_1996", "value_1996",
"networth_1996",
## 1998
"degree_1998", "hours_1998", "gift_1998", "value_1998", "networth_1998",
"employ_1998", "totinc_1998", "region_1998", "marstat_1998", "reside_1998",
"kidnum_1998",
## 2000
"degree_2000", "hours_2000", "employ_2000", "networth_2000", "gift_2000",
"value_2000", "totinc_2000", "region_2000", "marstat_2000", "reside_2000",
"kidnum_2000",
## 2004
"degree_2004", "hours_2004", "employ_2004", "gift_2004", "value_2004",
"networth_2004", "totinc_2004", "region_2004", "marstat_2004", "reside_2004",
"kidnum_2004",
## 2008
"degree_2008", "hours_2008", "employ_2008", "gift_2008", "value_2008",
"networth_2008", "totinc_2008", "region_2008", "marstat_2008", "reside_2008",
"kidnum_2008",
## 2012
"degree_2012", "hours_2012", "employ_2012", "gift_2012", "value_2012",
"networth_2012", "totinc_2012", "region_2012", "marstat_2012", "reside_2012",
"kidnum_2012"
)
echo <- categories[, order(colnames(categories))]
# 2. Cleaning one-use variables
## sex to female
table(echo$sex)
echo$sex <- echo$sex - 1
table(echo$sex)
colnames(echo)[which(names(echo) == "sex")] <- "female"
table(echo$female)
echo <- echo[, order(colnames(echo))]
## parental education
table(echo$ma_ed)
echo$ma_ed <- ifelse(echo$ma_ed <= 12, 0,
ifelse(echo$ma_ed == 12, 1,
ifelse(echo$ma_ed > 12 & echo$ma_ed < 16, 2,
ifelse(echo$ma_ed == 16 | echo$ma_ed == 17, 3, 4
))))
table(echo$ma_ed)
echo <- categories[, order(colnames(categories))]
## sex to female
table(echo$sex)
echo$sex <- echo$sex - 1
table(echo$sex)
colnames(echo)[which(names(echo) == "sex")] <- "female"
table(echo$female)
echo <- echo[, order(colnames(echo))]
## parental education
table(echo$ma_ed)
echo$ma_ed <- ifelse(echo$ma_ed <= 12, 0,
ifelse(echo$ma_ed == 12, 1,
ifelse(echo$ma_ed > 12 & echo$ma_ed < 16, 2,
ifelse(echo$ma_ed == 16 | echo$ma_ed == 17, 3,
ifelse(echo$ma_ed > 17 & echo$ma_ed <= 21, 4,
NA)))))
table(echo$ma_ed)
class(echo$ma_ed)
echo <- categories[, order(colnames(categories))]
## parental education
table(echo$ma_ed)
class(echo$ma_ed)
echo$ma_ed <- ifelse(echo$ma_ed < 12, 0,
ifelse(echo$ma_ed == 12, 1,
ifelse(echo$ma_ed > 12 & echo$ma_ed < 16, 2,
ifelse(echo$ma_ed == 16 | echo$ma_ed == 17, 3,
ifelse(echo$ma_ed > 17 & echo$ma_ed <= 21, 4,
NA)))))
table(echo$ma_ed)
sum(is.na(echo$ma_ed))
## father education
table(echo$pa_ed)
echo$pa_ed <- ifelse(echo$pa_ed < 12, 0,
ifelse(echo$pa_ed == 12, 1,
ifelse(echo$pa_ed > 12 & echo$pa_ed < 16, 2,
ifelse(echo$pa_ed == 16 | echo$pa_ed == 17, 3,
ifelse(echo$pa_ed > 17 & echo$pa_ed <= 20, 4,
NA)))))
table(echo$pa_ed)
## parental education
echo$parent_ed <- ifelse(echo$ma_ed >= echo$pa_ed, echo$ma_ed,
ifelse(echo$pa_ed > echo$ma_ed, echo$pa_ed,
ifelse(is.na(echo$ma_ed) & is.na(echo$pa_ed), NA,
7)))
table(echo$parent_ed)
anyNA(echo$parent_ed)
sum(is.na(echo$parent_ed))
dim(echo)
m1 <-lm(networth_2012 ~ gift_2012, data = echo)
summary(m1)
m1 <-lm(networth_2012 ~ totinc_2012 + gift_2012, data = echo)
summary(m1)
options(scipen = 999)
summary(m1)
m1 <-lm(networth_2012 ~ totinc_2012 + value_2012, data = echo)
summary(m1)
rm(list = ls())
